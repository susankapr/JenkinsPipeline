pipeline {
   agent {
      docker { image 'python:3.7.2' }
   //    label 'slave'
   }
   
   stages {
      stage('Hello') {
          steps {
              // sh 'java -version'
              echo "Get working directory"
              sh "pwd"
              sh "python --version"
              sh "pip --version"
              sh "pip install cfn-lint"
              sh "set -s globstar"
              sh "cfn-lint -f junit --output-file output.xml templates/*"
              // sh "pip install bash"
              // sh "which bash"
              // bash "bash -c '\$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)'"
          }
      }
   }
   post {
      always {
         junit(
            allowEmptyResults: true,
            testResults: '*.xml'
         )
         recordIssues(
            enabledForFailure: true, aggregatingResults: true,
            tools: [java(), checkStyle(pattern: 'main.xml', reportEncoding: 'UTF-8')]
         )
      }
   }
}
